<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <!-- Button trigger modal -->
    <button
      type="button"
      class="btn btn-primary"
      data-bs-toggle="modal"
      data-bs-target="#exampleModal"
      hidden
    >
      <div><%= showModal %></div>
      <span>Launch demo modal</span>
    </button>

    <!-- Modal -->
    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
      <% if (showModal) { %>
        data-bs-backdrop="static"
      <% } %>
    > 
      
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-primary">
            <h1 class="modal-title fs-5 text-white" id="exampleModalLabel">안내</h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body p-3" style="border: 10px solid white;     background-color: #e6f4fa;">
            <p>
              <h3 style="text-align: center;">인터넷 익스플로러(IE) 지원 종료 안내</h3>
              <p>인터넷익스플로러(IE) 서비스 지원이 <span>2022년 6월 15일 종료</span>됨에 따라 안전하고 원활한 LH청약센터 이용을 위해 크롬, 사파리, 엣지 등의 웹브라우저를 이용해주시기 바랍니다.</p>
            </p>
          </div>
          <div class="modal-footer flex-row-reverse ">
            <div class="input-group mb-3 ">
              <div class="input-group-text bg-transparent border-0">
                <input id="watchCheckbox" class="form-check-input mt-0 me-3" type="checkbox" value="" aria-label="Checkbox for following text input">
                <span>오늘 그만 보기</span>
              </div>
            </div>
            
          </div>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const myModal = new bootstrap.Modal(
          document.getElementById("exampleModal")
          );
          myModal.show();

        const watchCheckbox = document.getElementById('watchCheckbox')

        // 체크박스 클릭 이벤트 리스너
        watchCheckbox.addEventListener("change", () => {
          const isChecked = watchCheckbox.checked;

          // 쿠키 설정 함수
          function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
            const expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
          }

          // 체크박스 상태에 따라 쿠키 설정 또는 삭제
          if (isChecked) {
            setCookie("watchToday", "true", 1); // 1일 동안 유지
          } else {
            setCookie("watchToday", "", -1); // 쿠키 삭제
          }
        });

        // document.addEventListener('checkModal', () => {
        //     const myModal = new bootstrap.Modal(
        //     document.getElementById("exampleModal"),
        //     options
        //     );
        //     console.log('myModal : ', myModal)
        // })
      });
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
